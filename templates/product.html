{% extends "base.html" %} {% load crispy_forms_tags %} {% block content %}
<main class="mt-5 pt-4">
  <div class="container dark-grey-text mt-5">
    <div class="row wow fadeIn">
      <div class="col-md-6 mb-4" style="border: none; border-radius: 40px;">
        <img src="{{ product.image1.url }}" class="card-img-top img-thumbnail" />
      </div>

      <div class="col-md-6 mb-4">
        <div class="p-4 bg-white">
          <form method="POST" action="{% url 'main:product' product.slug %}">
            {% csrf_token %}
          <br>

          <span class="h3 font-weight-bold" style="font-family: cursive;">{{product.name}} </span>
          {% if product.category == 'cake' or product.category == 'cheesecake' %}
            <span class="float-right badge bg-dark" style="font-size: 2em; color:white" ><span id="hinta"style="font-family: 'Prompt', sans-serif;">Hinta</span>&nbsp;&euro;</span>
          {% else %}
          <span class="float-right badge bg-dark" style="font-size: 2em;" ><span id="hinta">{{ product.price }}</span></span>
          {% endif %}
          <br>
          <br>
          <hr>
          <p class=" font-weight-bold" style="font-family: cursive;">Ainesosat</p>

          <p style="font-family: cursive;">{{ product.description }}</p>

          <br />
          <hr>
          {% if product.is_gluteen_free or product.is_loctose_free %}
          <div>
              {% if product.is_gluteen_free %}
              <span class="float-left px-3 mx-3 text-white rounded" style="background-color: #f10303a1">
                <strong>
                  Gluteeniton
                </strong>
              </span>
            {% endif %}

            {% if product.is_loctose_free %}
            <span class="float-right px-3 text-white rounded" style="background-color: #f10303a1">
                <strong>
                  Laktoositon
                </strong>
                </span>
            {% endif %}
            <br>
            <hr>
          </div>

          {% endif %}

          <div class="">
            <br>

          {% if product.category == 'cake' or product.category == 'cheesecake' %}
            {% if product.variation_set.all %}

            <select class="browser-default custom-select custom-select-lg mb-3" name="price" id="price" onchange="myFunction()">
              <option value="" id="disableitem" disabled selected>KOKO</option>
              {% for item in product.variation_set.all %}
              <option value="{{item.price}}" > {{item.size}}</option>
              {% endfor %}

            </select>

            {% endif %}
            <button class="btn btn-md my-0 p float-right" style="background-color:#BF9000 ;color:black; font-family: 'Prompt', sans-serif;" type="submit" disabled id="addtocart">Lisää ostoskoriin
              <i class="fas fa-shopping-cart ml-1"></i>
            </button>
            {% else %}
            <a href="{{ product.get_add_to_cart_url }}" class="btn btn-md my-0 p float-right" style="background-color:#BF9000 ;color:black; font-family: 'Prompt', sans-serif;">
              Lisää ostoskoriin
              <i class="fas fa-shopping-cart ml-1"></i>
            </a>
            {% endif%}
          </div>
        </form>
        </div>
      </div>
    </div>
    <hr />
    <div class="row d-flex justify-content-center wow fadeIn rounded">
      <div class="col-md-6 text-center bg-white">
        <h4 class="my-4 h4" style="font-family: cursive;">Ravintosisältö</h4>

        <p style="font-family: cursive;">{{product.additional_info}}</p>
      </div>
    </div>
  </div>
  <script>
    function myFunction() {
      var x = document.getElementById("price").value;
      if (x != document.getElementById("disableitem")){
        document.getElementById("addtocart").removeAttribute("disabled");
      }
      document.getElementById("hinta").innerHTML = x ;
}
  </script>
  <br>
</main>
{% endblock content %}
